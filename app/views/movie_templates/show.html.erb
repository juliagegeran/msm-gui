<h1>
  Movie #<%= @the_movie.id %> details
</h1>

<a href="/movies">
  Go back
</a>


<div>
<a href = "/delete_movie/<%=@the_movie.id%>"> Delete movie </a>
</div>
<hr>

<hr>
  <form action = "/modify_movie_record/<%=@movie.id%>" method = "post">
  <div>
  <label for = "new_title_field">Title</label>
<input id = "new_title_field" name = "the_title" type = "text" value = "<%=@the_movie.title%>">
  </div>
  
  <div>
  <label for = "new_year_field">Year</label>
  <input id = "new_year_field" name = "the_year" type = "text" value = "<%=@the_movie.year%>">
  </div>

  <div>
  <label for = "new_duration_field">Duration</label>
  <input id = "new_duration_field" name = "the_duration" type = "text" value = "<%=@the_movie.duration%>">
  </div>

  <div>
  <label for = "new_image_field">Image</label>
  <input id = "new_image_field" name = "the_image" type = "text" value = "<%=@the_movie.image%>">
  </div>

  <div>
  <label for = "new_director_id">Director ID</label>
  <input id = "new_director_id" name = "the_director_id" type = "text" value = "<%=@the_movie.direcotr_id%>">
  </div>
  
  <button>Update movie</button>
  </form>

<hr>

<dl>
  <dt>
    Title
  </dt>
  <dd>
    <%= @the_movie.title %>
  </dd>

  <dt>
    Year
  </dt>
  <dd>
    <%= @the_movie.year %>
  </dd>

  <dt>
    Duration
  </dt>
  <dd>
    <%= @the_movie.duration %>
  </dd>

  <dt>
    Description
  </dt>
  <dd>
    <%= @the_movie.description %>
  </dd>

  <dt>
    Image
  </dt>
  <dd>
    <img src="<%= @the_movie.image %>" style="width:250px;">
  </dd>

  <dt>
    Director
  </dt>

  <dd>
    <% dir_id = @the_movie.director_id %>
    
    <% matching_directors = Director.where({ :id => dir_id }) %>
    
    <% the_director = matching_directors.at(0) %>


  <%if the_director == nil%>
    Uh oh! We weren't able to find a director for this movie.
  <%else%>
    <%= the_director.name %>
  <%end%>

  </dd>

  <dt>
    Created at
  </dt>
  <dd>
    <%= @the_movie.created_at %>
  </dd>

  <dt>
    Updated at
  </dt>
  <dd>
    <%= @the_movie.updated_at %>
  </dd>
</dl>

<hr>
